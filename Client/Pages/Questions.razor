@page "/questions/{gameid:int}"
@layout UserLayout
@rendermode RenderMode.InteractiveWebAssembly

<PageTitle>Reflectionnaire</PageTitle>

<RadzenStack Orientation="Orientation.Vertical" AlignItems="AlignItems.Center" Gap="100px">
    <h2>@_reflectionnaire?.Description</h2>
    <h3>@_reflectionnaire?.Name</h3>
</RadzenStack>

@if (_answers == null)
{
    <p><em>Loading...</em></p>
}
else if (_scores == null)
{
    <RadzenCard class="p-1 rz-background-color-secondary-lighter rz-text-align-center rz-m-12">
        <RadzenText TextStyle="TextStyle.Body1">Beantwoordt elke vraag met een score tussen de 1 en 5 sterren</RadzenText>
    </RadzenCard>

    <RadzenStack Orientation="Orientation.Vertical" AlignItems="AlignItems.Center" Gap="1000px">
        @foreach (var answer in _answers)
        {
            <RadzenCard class="p-1 rz-background-color-primary-light rz-text-align-center rz-m-12">
                <RadzenText TextStyle="TextStyle.H4" class="rz-color-on-primary-light"><strong>@answer.Question?.Description</strong></RadzenText>
                <a id=@answer.Question?.Id />
                <Rating @bind-Value=@answer.Score Stars="5" Style="TextStyle.H4" />
            </RadzenCard>
        }

        <RadzenCard class="p-1 rz-background-color-secondary-lighter rz-text-align-center rz-m-12">
            <RadzenText TextStyle="TextStyle.Body1">Verstuur jouw antwoorden</RadzenText>
            <a id="sentBlock" />
            <button @onclick="OnSentClicked">Versturen</button>
        </RadzenCard>

        <!-- dummy block to make the sent button center correctly -->
        <RadzenCard class="p-1 rz-background-color-secondary-lighter rz-text-align-center rz-m-12">
            <RadzenText TextStyle="TextStyle.Body1"></RadzenText>
        </RadzenCard>

    </RadzenStack>
}
else if (_scores != null)
{
    <RadzenStack Orientation="Orientation.Vertical" AlignItems="AlignItems.Center">
        <RadzenCard class="p-1 rz-background-color-secondary-lighter rz-text-align-center rz-m-12">
            <RadzenText TextStyle="TextStyle.Body1">Jouw persoonlijke score</RadzenText>
        </RadzenCard>

        <Radarchart ScoreCategory1="_score1" ScoreCategory2="_score2" ScoreCategory3="_score3" ScoreCategory4="_score4" />
    </RadzenStack>
}
